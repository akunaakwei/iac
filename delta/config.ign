{"ignition":{"version":"3.4.0"},"passwd":{"users":[{"groups":["sudo"],"name":"akuna","sshAuthorizedKeys":["ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAICjQg4xxpoNQeUuiapCXuahcnDmLvLq1H0B2CJTzdzKW"]}]},"storage":{"files":[{"path":"/etc/systemd/network/00-enp1s0.network","contents":{"compression":"","source":"data:,%5BMatch%5D%0AName%3Denp1s0%0A%5BNetwork%5D%0AAddress%3D192.168.0.6%2F24%0AGateway%3D192.168.0.1%0ADNS%3D8.8.8.8%0A"}},{"path":"/etc/hostname","contents":{"compression":"","source":"data:,delta"},"mode":420},{"path":"/etc/vconsole.conf","contents":{"compression":"","source":"data:,KEYMAP%3Dde"},"mode":420},{"path":"/etc/systemd/resolved.conf","append":[{"compression":"","source":"data:,DNSStubListener%3Dno"}]},{"path":"/opt/extensions/docker_compose/docker_compose-2.24.5-x86-64.raw","contents":{"source":"https://github.com/flatcar/sysext-bakery/releases/download/latest/docker_compose-2.24.5-x86-64.raw"},"mode":420},{"path":"/etc/sysupdate.docker_compose.d/docker_compose.conf","contents":{"source":"https://github.com/flatcar/sysext-bakery/releases/download/latest/docker_compose.conf"}},{"path":"/etc/sysupdate.d/noop.conf","contents":{"source":"https://github.com/flatcar/sysext-bakery/releases/download/latest/noop.conf"}},{"path":"/opt/pihole/docker-compose.yml","contents":{"compression":"gzip","source":"data:;base64,H4sIAAAAAAAC/2yR0c6aMBiGz72K3sBAF2O0O2LSRBIFAsWDnTQN/aLNSsvaitndL2J18P8/JIS8z8PHy4cDO8gWHF4g1MurUfC4Q6g12nOpwTLNO8CBjUh2/PJO4vCQ4h6cHznoQVqjO9D+OQsh+gsjcrOmh/gnWCX1KyenklQJbSrS5BnFqA2gBjuAzUqMVrvv0WqzjZbRJrAyOxRHwtK8Zhhto/H88biuo3VQ0ryuyR4jb2/wig77kiV7mp3J57ymSUWn71otp5jk6QzuZrQqGkqqmfChaXFKshwjqT1YzVWg56yiTXJkh6Kmr3VGM2cw6tY9/83j+BYkJrjnOAbfhu3Hb0Fo13H3Z2KEJBJPqeU940L8H5kTypL0lOVjYsF5bj1GXN35XzdmvZWDVHABMVmcBn839jfrjACMrsb5xaTttOeoCysHsBgp047fNuv5hfEvAAD//wjNMSmXAgAA"}}],"links":[{"path":"/etc/localtime","target":"../usr/share/zoneinfo/Europe/Berlin"},{"overwrite":true,"path":"/etc/systemd/system/multi-user.target.wants/docker.service","hard":false,"target":"/usr/lib/systemd/system/docker.service"},{"path":"/etc/extensions/docker_compose.raw","hard":false,"target":"/opt/extensions/docker_compose/docker_compose-2.24.5-x86-64.raw"}]},"systemd":{"units":[{"enabled":true,"name":"docker.service"},{"contents":"[Unit]\nBefore=docker.service var-lib-docker.mount\nRequiresMountsFor=/var/lib\nConditionPathExists=!/var/lib/docker.btrfs\n[Service]\nType=oneshot\nExecStart=/usr/bin/truncate --size=16G /var/lib/docker.btrfs\nExecStart=/usr/sbin/mkfs.btrfs /var/lib/docker.btrfs\n","name":"format-var-lib-docker.service"},{"contents":"[Unit]\nBefore=docker.service\nAfter=format-var-lib-docker.service\nRequires=format-var-lib-docker.service\n[Mount]\nWhat=/var/lib/docker.btrfs\nWhere=/var/lib/docker\nType=btrfs\nOptions=loop,discard\n[Install]\nRequiredBy=docker.service\n","enabled":true,"name":"var-lib-docker.mount"},{"enabled":true,"name":"systemd-sysupdate.timer"},{"dropins":[{"contents":"[Service]\nExecStartPre=/usr/bin/sh -c \"readlink --canonicalize /etc/extensions/docker_compose.raw \u003e /tmp/docker_compose\"\nExecStartPre=/usr/lib/systemd/systemd-sysupdate -C docker_compose update\nExecStartPost=/usr/bin/sh -c \"readlink --canonicalize /etc/extensions/docker_compose.raw \u003e /tmp/docker_compose-new\"\nExecStartPost=/usr/bin/sh -c \"if ! cmp --silent /tmp/docker_compose /tmp/docker_compose-new; then touch /run/reboot-required; fi\"\n","name":"docker_compose.conf"}],"name":"systemd-sysupdate.service"},{"contents":"[Unit]\nDescription=Start pihole\nAfter=docker.service\nRequires=docker.service\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/usr/bin/docker compose -f /opt/pihole/docker-compose.yml up -d\nExecStop=/usr/bin/docker compose -f /opt/pihole/docker-compose.yml stop\n[Install]\nWantedBy=multi-user.target","enabled":true,"name":"start-pihole.service"}]}}
